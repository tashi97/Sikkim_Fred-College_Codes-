SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

CREATE PROCEDURE [dbo].[P_READ_DEMAND]
(
	@DEMAND_ID		BIGINT = NULL
)

AS

BEGIN TRY
	IF @DEMAND_ID IS NULL
		BEGIN
			SELECT
				DM.DEMAND_ID, 
				DM.DEMAND_DESC
			FROM
				DEMAND_MASTER DM
		END
	--------------
	ELSE
		BEGIN
			SELECT
				DM.DEMAND_ID, 
				DM.DEMAND_DESC
			FROM
				DEMAND_MASTER DM
			WHERE
				DM.DEMAND_ID = @DEMAND_ID
		END
	
END TRY 

BEGIN CATCH
	DECLARE @ERR  VARCHAR(1000)
	SELECT @ERR=ERROR_MESSAGE()
	IF	ERROR_SEVERITY () > 12
		BEGIN
			RAISERROR (@ERR, 16, 20)
		END
		--
		ELSE
		--
		BEGIN
			RAISERROR (@ERR, 12, 2)
		END
END CATCH
GO